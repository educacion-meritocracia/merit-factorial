---
pagetitle: "COES 2024"
Author: Equipo EDUMER
bibliography: "../input/bib/merit-factorial.bib"
csl: "../input/bib/apa6.csl"
lang: es
knitr:
  opts_chunk:
    collapse: true
    comment: "#>"
    R.options:
      
      knitr.graphics.auto_pdf: true
format:
  revealjs:
    #logo: images/edumer.png
    slide-number: true
    theme: "libs/edumer.scss"
    auto-stretch: false
    title-slide-attributes:
      visibility: false
    transition: fade
    transition-speed: slow
# data-background-image: images/cover.jpg
# data-background-size: cover
    auto-play-media: true
    mathjax: "default"
  pdf:
    format: beamer 
    keep-tex: true  # Debug LaTeX output if needed
editor_options: 
  chunk_output_type: console
---

```{r}
#| label: setup
#| include: false
library(knitr)
knitr::opts_chunk$set(echo = F,
                      warning = F,
                      error = F, 
                      message = F) 

options(kableExtra.html.bsTable = T)
options(knitr.kable.NA = "")
```

```{r}
#| label: packages
#| include: false

if (! require("pacman")) install.packages("pacman")

pacman::p_load(tidyverse,
               sjmisc, 
               sjPlot,
               here,
               lavaan,
               psych,
               corrplot,
               ggdist,
               patchwork,
               sjlabelled,
               semTools,
               gtools,
               RColorBrewer,
               skimr,
               readxl)


options(scipen=999)
rm(list = ls())
```


```{r}
#| label: data
#| include: false
#| echo: false

load(file = here("output", "data", "db1_proc.RData"))
load(file = here("output", "data", "db_long_proc.RData"))
load(file = here("output", "results.RData"))

```


::: columns
::: {.column width="20%"}


![](images/coes.png)



![](images/edumer.png)



:::

::: {.column .column-right width="80%"}
<br>

## **Medición de percepciones y preferencias sobre meritocracia en etapa escolar en Chile**

------------------------------------------------------------------------

**Juan Carlos Castillo, Andreas Laffert & Kevin Carrasco**


::: {.red2 .medium}

**Departamento de Sociología, Universidad de Chile**

**Instituto de Sociología, Pontificia Universidad Católica de Chile**

**Centro de Estudios de Conflicto y Cohesión Social - COES**

**FONDECYT No. 1210847 "Meritocracia en la escuela: fundamentos morales del mercado educativo y sus implicancias para la formación ciudadana en Chile"**

:::

XI Conferencia Internacional COES

7-8 Noviembre 2024, Chile

:::
:::

::: {.notes}
Aquí mis notas
:::


# Contexto y motivación {data-background-color="#5f5758"}




## Antecedentes

::: {.incremental .highlight-last style="font-size: 100%;"}

- The justification of social inequality based on market-type criteria has been conceptualized as the individuals' adherence to the deservingness of social goods and services (such as health, education, and pensions) based on prices and individuals' ability to pay [@boltanski_new_2005; @lane_market_1986; @streeck_citizens_2012].

- Research on social stratification beliefs [@kluegel_beliefs_1987], highlights that people's explanations and justifications of social inequality are closely tied to their judgments of deservingness. 

-  The expansion of marketization has been related to a larger justification of market mechanisms, whereby societies with larger private spending on services show larger market justice preferences [@lindh_public_2015].

:::

## Antecedentes

::::: columns
::: {.column width="50%" .content-box-red}

#### A

- The original definition of merit is a combination of effort and talent [@young_rise_1958]
- 2
- 3

:::

::: {.column width="50%" .content-box-yellow}

#### B

- Adolescents from low-socioeconomic-status families are likelier to have an egalitarian fairness view and consider an equal distribution as fair in a situation with unequal merits [@almas_fairness_2017]
- 2
- 3

:::
:::::

## Hipótesis

::: {.incremental .highlight-last style="font-size: 100%;"}

$H_{1}$

$H_{2}$

$H_{3}$

$H_{n}$


::: 

# Datos, variables y métodos {data-background-color="#5f5758"}

## Datos

::: {.incremental .highlight-last style="font-size: 120%;"}

- [Encuesta Panel Educación y Meritocracia (EDUMER)](https://github.com/educacion-meritocracia/edumer-data) en sus olas de 2023 (N = 839) y 2024 (N = 612) para estudiantes.

- Aplicación de entrevistas CAWI a estudiantes de sexto básico y primero medio provenientes de 9 escuelas de la región Metropolitana y Valparaíso de Chile.

- Muestra no probabilística.

- Módulos sobre meritocracia, preferencias y desigualdad, y cuidadanía.

:::

## Variables



**<span style="color:darkorange">Escala de percepciones y preferencias sobre meritocracia (PPMS)**: Las variables incluidas en el modelo de medición se operacionalizan según los ítems propuestos por Castillo et al. [-@castillo_multidimensional_2023] </font>

```{r}
#| label: tbl-vars-ppms
#| tbl-cap: "Items de PPMS"
#| results: asis
#| echo: false

tabitems <- read_excel(path = here("input/tables/table_items.xlsx"),
                       sheet = 1)
cnames <- c("Componente", "Dimensiones","Item", "Categorías de respuesta")

kableExtra::kable(tabitems, format = "html", booktabs= T, escape = F, align = 'c',col.names = cnames, caption = NULL) %>%
   kableExtra::kable_styling(
     full_width = F,
     latex_options = c("hold_position"),
     position = "center",
     font_size = 15,
     bootstrap_options=c("striped", "bordered", "condensed")) %>%
   kableExtra::collapse_rows(columns = 1:2, valign = "top") %>% 
   kableExtra::column_spec(column = 1, width = "1.5cm") %>%
   kableExtra::column_spec(column = 2, width = "2cm")
   

```

## Variables



```{r}
#| label: fig-likerplot
#| fig-align: center
#| fig-cap: "Escala de percepciones y preferencias sobre meritocracia (PPMS)"
#| fig-cap-location: top
#| fig-width: 7
#| out-width: '75%'

theme_set(theme_ggdist())
colors <- RColorBrewer::brewer.pal(n = 4, name = "RdBu")

a <- db1 %>% 
  select(starts_with("perc")) %>% 
  sjPlot::plot_likert(geom.colors = colors,
                      title = c("a. Percepciones"),
                      geom.size = 0.8,
                      axis.labels = c("Esfuerzo", "Talento", "Padres ricos", "Contactos"),
                      catcount = 4,
                      values  =  "sum.outside",
                      reverse.colors = F,
                      reverse.scale = T,
                      show.n = FALSE,
                      show.prc.sign = T
                      ) +
  ggplot2::theme(legend.position = "none")

b <- db1 %>% 
  select(starts_with("pref")) %>% 
  sjPlot::plot_likert(geom.colors = colors,
                      title = c("b. Preferencias"),
                      geom.size = 0.8,
                     axis.labels = c("Esfuerzo", "Talento", "Padres ricos", "Contactos"),
                      catcount = 4,
                      values  =  "sum.outside",
                      reverse.colors = F,
                      reverse.scale = T,
                      show.n = FALSE,
                      show.prc.sign = T
  ) +
  ggplot2::theme(legend.position = "bottom")

likerplot <- a / b + plot_annotation(caption = paste0("Fuente: Elaboración propia en base a Encuesta Panel EDUMER Ola 1"," (n = ",dim(db1)[1],")"
))

likerplot
```

## Variables

**<span style="color:darkorange">Market Justice Preferences**: Índice promedio de tres indicadores que abordan el grado de justificación respecto a si el acceso a los servicios sociales en salud, pensiones y educación debe estar condicionado por los ingresos ($\alpha$ = 0.83). </font>

```{r}
#| label: tbl-vars-mjp
#| tbl-cap: "Items de preferencias por justicia de mercado"
#| results: asis
#| echo: false


db1$mjp <- sjlabelled::set_label(db1$mjp, "Índice promedio preferencias por justicia de mercado")
labels <- get_label(db1[,c(10:13)])
vars_l <- c("Justicia en Educación", "Justicia en Salud", "Justicia en Pensiones", "Market Justice Preferences")


t1[9:12,] %>% 
  mutate(label = labels,
         Variable = vars_l) %>% 
  select(Variable, label, Mean, SD, Range, Histogram) %>% 
  kableExtra::kable(format = "html", 
                    booktabs= T, 
                    escape = F, 
                    align = 'c',
                    col.names = c("Variable", "Etiqueta", "Media", "DE", "Rango", "Histograma"),
                    caption = NULL) %>%
   kableExtra::kable_styling(
     full_width = F,
     latex_options = c("hold_position"),
     position = "center",
     font_size = 22,
     bootstrap_options=c("striped", "bordered")) %>%
  kableExtra::row_spec(0, bold = T) %>% 
  kableExtra::column_spec(column = 1, width = "3 cm") %>%
   kableExtra::column_spec(column = 2, width = "3 cm")
  
  
```





## Métodos

::: {.incremental .highlight-last style="font-size: 110%;"}

1. Análisis Factorial Confirmatorio (CFA) en base a un modelo de cuatro factores latentes [@castillo_multidimensional_2023], con estimador Diagonal Weighted Least Squares (DWLS) debido al nivel ordinal de los ítems [@kline_principles_2023]

2. Invarianza longitudinal con cuatro módelos jerárquicos [@liu_testing_2017]: 
    - Configural (misma estructura factorial)
    - Débil (+ mismas cargas factoriales)
    - Fuerte (+ mismos interceptos)
    - Estricto (+ mismas varianzas de error)
  
3. Regresiones de variables observadas en variables latentes (SEM): factores meritocráticos y no meritocráticos sobre preferencias por justicia de mercado [@castillo_socialization_2024]


:::

# Resultados {data-background-color="#5f5758"}

## Correlaciones

::: {style="font-size: 120%;"}

```{r}
#| label: fig-matriz
#| fig-cap: "Matriz de correlaciones"
#| fig-cap-location: top
#| fig-align: center
#| fig-width: 7
#| out-width: '80%'

M <- psych::polychoric(db1[c(2:9,13)])

P <- cor(db1[c(2:9,13)], method = "spearman")

diag(M$rho) <- NA

diag(P) <- NA

M$rho[9,] <- P[9,]

rownames(M$rho) <- c("A. Percepción Esfuerzo",
                     "B. Percepción Talento",
                     "C. Percepción Padres Ricos",
                     "D. Percepción Contactos",
                     "E. Preferencias Esfuerzo",
                     "F. Preferencias Talento",
                     "G. Preferencias Padres Ricos",
                     "H. Preferencias Contactos",
                     "I. Market Justice Preferences")

#set Column names of the matrix
colnames(M$rho) <-c("(A)", "(B)","(C)","(D)","(E)","(F)","(G)",
                       "(H)","(I)")

rownames(P) <- c("A. Percepción Esfuerzo",
                     "B. Percepción Talento",
                     "C. Percepción Padres Ricos",
                     "D. Percepción Contactos",
                     "E. Preferencias Esfuerzo",
                     "F. Preferencias Talento",
                     "G. Preferencias Padres Ricos",
                     "H. Preferencias Contactos",
                     "I. Market Justice Preferences")

#set Column names of the matrix
colnames(P) <-c("(A)", "(B)","(C)","(D)","(E)","(F)","(G)",
                    "(H)","(I)")

testp <- cor.mtest(M$rho, conf.level = 0.95)

#Plot the matrix using corrplot
 corrplot::corrplot(M$rho,
                   method = "color",
                   addCoef.col = "black",
                   type = "upper",
                   tl.col = "black",
                   col = colorRampPalette(c("#E16462", "white", "#0D0887"))(12),
                   bg = "white",
                   na.label = "-") 


```
:::

## Análisis Factorial Confirmatorio

:::: { .incremental style="font-size: 120%;"}

```{r}
#| label: fig-cfa
#| fig-cap: "Análisis factorial confirmatorio de PPMS en población escolar Chile"
#| fig-cap-location: top
#| fig-align: center
#| fig-width: 8
#| out-width: '110%'

knitr::include_graphics(path = here("presentations/images/cfa_diag.png"))
```

::: { .green}
- ✓ $H_1$, $H_2$, $H_3$, $H_4$
:::

::::

## Invarianza longitudinal

:::: { .incremental style="font-size: 120%;"}

```{r}
#| label: tbl-invarianza
#| tbl-cap: "Resultados de invarianza de medida de grupos múltiples para PPMS"
#| results: asis
#| echo: false

col.nam <- c("Model","&chi;^2 (df)","CFI","RMSEA (90 CI)",
             "&Delta; &chi;^2 (&Delta; df)","&Delta; CFI","&Delta; RMSEA","Decision")
footnote <- paste0("Group 1, n = ",conf@Data@nobs[[1]],"; Group 2, n = ",conf@Data@nobs[[2]])

tab.inv[3,6] <- 0

tab.inv %>% 
  kableExtra::kable(format = "html",
                    align = "c",
                    booktabs = T,
                    escape = F,
                    caption = NULL,
                    col.names = col.nam) %>%
  kableExtra::kable_styling(full_width = T,
                            latex_options = "hold_position",
                            bootstrap_options=c("striped", "bordered", "condensed"),
                            font_size = 22) %>%
 kableExtra::column_spec(c(1,8), width = "3.5cm") %>% 
kableExtra::column_spec(2:7, width = "4cm") %>% 
  kableExtra::column_spec(4, width = "5cm")
```

::: {.small}

`r footnote`
:::

::: { .red}
- ✗ $H_5$
:::

::::

## Modelo de regresión

:::: { .incremental style="font-size: 110%;"}
```{r}
#| label: fig-sem
#| fig-cap: "Regresión de variables latentes PPMS sobre preferencias por justicia de mercado"
#| fig-cap-location: top
#| fig-align: center
#| fig-width: 7
#| out-width: '90%'

knitr::include_graphics(path = here("presentations/images/sem_diag.png"))

```

::: { .red}
- ✗ $H_6$
:::

::::


# Discusión y conclusiones {data-background-color="#5f5758"}


## Discusión y conclusiones 


:::: { .incremental style="font-size: 100%;"}

**<span style="color:darkorange">1. Agenda de medición sobre meritocracia**: modelo de medición PPMS presenta buenos indicadores de ajuste y sus dimensiones se corresponden con el modelo conceptual multidimensional en población escolar [@castillo_multidimensional_2023] </font>

**<span style="color:darkorange">2. Invarianza longitudinal**: no es posible asumir que los ítems tienen una relación consistente con el constructo en ambas olas de estudiantes [@liu_testing_2017] </font>

**<span style="color:darkorange">3. Preferencias por justicia de mercado**: quienes sostienen preferencias meritocráticas prefieren menos justicia de mercado en salud, pensiones y educación, mientras que lo opuesto ocurre con quienes prefieren elementos no meritocráticos [@castillo_socialization_2024; @lindh_public_2015]</font>


**<span style="color:darkorange">4. Proyecciones**: aplicación de la escala en población adulta, </font>
::::


# Gracias por su atención! 

-   **Github del proyecto:** <https://github.com/educacion-meritocracia>

## Referencias