<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Equipo EDUMER">

<title>introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="01-introduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/quarto.js"></script>
<script src="01-introduction_files/libs/quarto-html/popper.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/anchor.min.js"></script>
<link href="01-introduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01-introduction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01-introduction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01-introduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01-introduction_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Equipo EDUMER </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Despite rising economic inequality, wealth concentration, and declining social mobility in contemporary societies <span class="citation" data-cites="chancel_world_2022 lopez-roldan_comparative_2021">(<a href="#ref-chancel_world_2022" role="doc-biblioref">Chancel et al., 2022</a>; <a href="#ref-lopez-roldan_comparative_2021" role="doc-biblioref">López-Roldán &amp; Fachelli, 2021</a>)</span>, meritocratic beliefs remain remarkably stable among citizens <span class="citation" data-cites="mijs_paradox_2019">(<a href="#ref-mijs_paradox_2019" role="doc-biblioref">Mijs, 2019</a>)</span>. The notion that economic disparities are justified by differences in individual effort and talent <span class="citation" data-cites="young_rise_1958">(<a href="#ref-young_rise_1958" role="doc-biblioref">Young, 1958</a>)</span> has been identified as a key mechanism for legitimizing persistent inequalities. Educational institutions have played a central role in promoting these beliefs due to their historical association with the promise of mobility and opportunity <span class="citation" data-cites="dubet_repensar_2011 batruch_belief_2022">(<a href="#ref-batruch_belief_2022" role="doc-biblioref">Batruch et al., 2022</a>; <a href="#ref-dubet_repensar_2011" role="doc-biblioref">Dubet, 2011</a>)</span>. Yet, research increasingly shows that schools often reproduce rather than reduce social inequalities <span class="citation" data-cites="bourdieu_reproduction_1990 goudeau_hidden_2017a">(<a href="#ref-bourdieu_reproduction_1990" role="doc-biblioref">Bourdieu &amp; Passeron, 1990</a>; <a href="#ref-goudeau_hidden_2017a" role="doc-biblioref">Goudeau &amp; Croizet, 2017</a>)</span>. This contradiction has drawn attention to the role of schools in fostering meritocratic beliefs that operate as system-justifying ideologies, obscuring structural disadvantages <span class="citation" data-cites="jost_psychology_2003 wiederkehr_belief_2015">(<a href="#ref-jost_psychology_2003" role="doc-biblioref">Jost &amp; Hunyady, 2003</a>; <a href="#ref-wiederkehr_belief_2015" role="doc-biblioref">Wiederkehr et al., 2015</a>)</span>. Understanding how young people perceive and endorse these beliefs is crucial, as they shape educational experiences and reinforce broader narratives about fairness and inequality.</p>
<p>Meritocracy is typically understood as a distributive system in which rewards are allocated based on individual merit—namely, effort and ability <span class="citation" data-cites="young_rise_1958">(<a href="#ref-young_rise_1958" role="doc-biblioref">Young, 1958</a>)</span>. Framed as a means to overcome ascriptive inequalities, meritocracy is often linked to ideals of fairness and equal opportunity, enabling individuals to advance based on merit rather than social origin <span class="citation" data-cites="goldthorpe_myth_2003a mijs_unfulfillable_2016">(<a href="#ref-goldthorpe_myth_2003a" role="doc-biblioref">Goldthorpe, 2003</a>; <a href="#ref-mijs_unfulfillable_2016" role="doc-biblioref">Mijs, 2016</a>)</span>. However, several scholars argue that meritocracy may in fact legitimize inequality, insofar as it promotes an outcome-based hierarchy where those already advantaged are more likely to succeed <span class="citation" data-cites="castillo_socialization_2024">(<a href="#ref-castillo_socialization_2024" role="doc-biblioref">Castillo et al., 2024</a>)</span>. Studies in sociology and psychology show that belief in meritocracy correlates with stronger individual attributions of success, lower support for redistribution, and greater tolerance for inequality <span class="citation" data-cites="madeira_primes_2019 newman_economic_2023 trump_when_2020 castillo_meritocracia_2019">(<a href="#ref-castillo_meritocracia_2019" role="doc-biblioref">Castillo et al., 2019</a>; <a href="#ref-newman_economic_2023" role="doc-biblioref">Newman, 2023</a>; <a href="#ref-trump_when_2020" role="doc-biblioref">Trump, 2020</a>; <a href="#ref-madeira_primes_2019" role="doc-biblioref"><strong>madeira_primes_2019?</strong></a>)</span>. These critiques question the validity of meritocracy as a moral ideal, given the persistent influence of non-meritocratic factors—such as family background or economic capital—on life chances <span class="citation" data-cites="garcia-sierra_dark_2023 witteveen_reconsidering_2020 markovits_meritocracy_2019">(<a href="#ref-garcia-sierra_dark_2023" role="doc-biblioref">García-Sierra, 2023</a>; <a href="#ref-markovits_meritocracy_2019" role="doc-biblioref">Markovits, 2019</a>; <a href="#ref-witteveen_reconsidering_2020" role="doc-biblioref">Witteveen &amp; Attewell, 2020</a>)</span>.</p>
<p>Due to the role that meritocratic beliefs play in the justification of individual achievement (or failure) in contemporary societies, schools are central sites for the socialization of meritocratic beliefs, promoting the idea that academic success depends primarily on effort and talent <span class="citation" data-cites="wiederkehr_belief_2015 batruch_belief_2022 erivwo_meritocracy_2021">(<a href="#ref-batruch_belief_2022" role="doc-biblioref">Batruch et al., 2022</a>; <a href="#ref-erivwo_meritocracy_2021" role="doc-biblioref">Erivwo et al., 2021</a>; <a href="#ref-wiederkehr_belief_2015" role="doc-biblioref">Wiederkehr et al., 2015</a>)</span>. This belief not only sustains the school’s selective function but also reinforces broader narratives of individual responsibility and fairness. Research has shown that belief in school meritocracy is associated with greater acceptance of social and economic inequalities <span class="citation" data-cites="darnon_where_2018 batruch_belief_2022 castillo_socialization_2024">(<a href="#ref-batruch_belief_2022" role="doc-biblioref">Batruch et al., 2022</a>; <a href="#ref-castillo_socialization_2024" role="doc-biblioref">Castillo et al., 2024</a>; <a href="#ref-darnon_where_2018" role="doc-biblioref">Darnon et al., 2018</a>)</span>, suggesting that schools contribute not only to the reproduction but also to the legitimation of inequality. In highly stratified systems like Chile’s, this discourse may obscure the effects of social origin on educational outcomes <span class="citation" data-cites="goudeau_hidden_2017a">(<a href="#ref-goudeau_hidden_2017a" role="doc-biblioref">Goudeau &amp; Croizet, 2017</a>)</span>.</p>
<p>Although there is growing interest in meritocracy, concepts and instruments for measuring it vary substantially across the literature, making it difficult to assess how individuals actually understand and evaluate meritocratic principles. To address this gap, Castillo et al. <span class="citation" data-cites="castillo_multidimensional_2023">(<a href="#ref-castillo_multidimensional_2023" role="doc-biblioref">2023</a>)</span> propose a conceptual and measurement framework that distinguishes between two dimensions of meritocratic beliefs: perceptions (how individuals think meritocracy operates in practice) and preferences (how they think it should operate). The framework also differentiates between meritocratic factors—such as effort and ability—and non-meritocratic ones, including social contacts or coming from a wealthy family. Based on these distinctions, the authors developed a short, multidimensional scale, which they applied and validated in a representative sample of Chilean adults. Their findings show that perceptions and preferences regarding meritocratic and non-meritocratic elements are distinct yet interrelated, coexisting in complex ways.</p>
<p>Against this background, and with the aim of contributing to empirical research on the early formation of meritocratic beliefs <span class="citation" data-cites="elenbaas_unfairness_2019a batruch_belief_2022">(<a href="#ref-batruch_belief_2022" role="doc-biblioref">Batruch et al., 2022</a>; <a href="#ref-elenbaas_unfairness_2019a" role="doc-biblioref">Elenbaas, 2019</a>)</span>, this study seeks to extend the work of Castillo et al. <span class="citation" data-cites="castillo_multidimensional_2023">(<a href="#ref-castillo_multidimensional_2023" role="doc-biblioref">2023</a>)</span> by evaluating the applicability of their conceptual and measurement framework among school-aged populations in Chile. Specifically, it assesses whether perceptions and preferences regarding meritocratic and non-meritocratic principles are empirically distinguishable, stable across age cohorts, and consistent over time. By focusing on early adolescence—a formative stage for civic and moral socialization—this study explores how distributive beliefs emerge, develop, and potentially consolidate within school settings.</p>
<p>This study focuses on Chile, a particularly relevant context for examining meritocracy in education. Despite sustained economic growth and poverty reduction, Chile remains one of the most unequal countries in Latin America and the OECD <span class="citation" data-cites="chancel_world_2022 flores_top_2020">(<a href="#ref-chancel_world_2022" role="doc-biblioref">Chancel et al., 2022</a>; <a href="#ref-flores_top_2020" role="doc-biblioref"><strong>flores_top_2020?</strong></a>)</span>, partly rooted in neoliberal reforms that turned education into a competitive market [<span class="citation" data-cites="madariaga_three_2020">Madariaga (<a href="#ref-madariaga_three_2020" role="doc-biblioref">2020</a>)</span>; boccardo_30_2020]. Implemented during the dictatorship and expanded in democracy, these reforms institutionalized school choice and public-private competition, generating a highly stratified and segregated educational system <span class="citation" data-cites="corvalan_mercado_2017">(<a href="#ref-corvalan_mercado_2017" role="doc-biblioref">Corvalán et al., 2017</a>)</span>. While public discontent has driven important reforms, meritocratic narratives remain deeply embedded in students’ understandings of success and fairness <span class="citation" data-cites="canalesceron_sujeto_2021">(<a href="#ref-canalesceron_sujeto_2021" role="doc-biblioref">Canales Cerón et al., 2021</a>)</span>.</p>
<p>We address the following research questions: (1) To what extent do Chilean students perceive and prefer meritocratic and non-meritocratic principles in education? (2) Are these beliefs stable across age cohorts and over time? To explore these questions, we draw on panel survey data collected in 2023 and 2024 from students aged 13 and 14 (N = 512). The following sections present the theoretical framework, describe the data and methods, and report the findings from confirmatory factor analysis and measurement invariance testing. We conclude with a discussion of the implications for the study of socialization, education, and inequality.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-batruch_belief_2022" class="csl-entry" role="listitem">
Batruch, A., Jetten, J., Van de Werfhorst, H., Darnon, C., &amp; Butera, F. (2022). Belief in <span>School Meritocracy</span> and the <span>Legitimization</span> of <span>Social</span> and <span>Income Inequality</span>. <em>Social Psychological and Personality Science</em>, 194855062211110. <a href="https://doi.org/10.1177/19485506221111017">https://doi.org/10.1177/19485506221111017</a>
</div>
<div id="ref-bourdieu_reproduction_1990" class="csl-entry" role="listitem">
Bourdieu, P., &amp; Passeron, J. C. (1990). <em>Reproduction in <span>Education</span>, <span>Society</span> and <span>Culture</span></em> (Second Edition). Sage Publications Ltd.
</div>
<div id="ref-canalesceron_sujeto_2021" class="csl-entry" role="listitem">
Canales Cerón, M., Orellana Calderón, V. S., &amp; Guajardo Mañán, F. (2021). Sujeto y cotidiano en la era neoliberal: El caso de la educaci<span>ó</span>n chilena. <em>Revista Mexicana de Ciencias Pol<span>í</span>ticas y Sociales</em>, <em>67</em>(244). <a href="https://doi.org/10.22201/fcpys.2448492xe.2022.244.70386">https://doi.org/10.22201/fcpys.2448492xe.2022.244.70386</a>
</div>
<div id="ref-castillo_multidimensional_2023" class="csl-entry" role="listitem">
Castillo, J. C., Iturra, J., Maldonado, L., Atria, J., &amp; Meneses, F. (2023). A <span>Multidimensional Approach</span> for <span>Measuring Meritocratic Beliefs</span>: <span>Advantages</span>, <span>Limitations</span> and <span>Alternatives</span> to the <span>ISSP Social Inequality Survey</span>. <em>International Journal of Sociology</em>, <em>53</em>(6), 448–472. <a href="https://doi.org/10.1080/00207659.2023.2274712">https://doi.org/10.1080/00207659.2023.2274712</a>
</div>
<div id="ref-castillo_socialization_2024" class="csl-entry" role="listitem">
Castillo, J. C., Salgado, M., Carrasco, K., &amp; Laffert, A. (2024). The <span>Socialization</span> of <span>Meritocracy</span> and <span>Market Justice Preferences</span> at <span>School</span>. <em>Societies</em>, <em>14</em>(11), 214. <a href="https://doi.org/10.3390/soc14110214">https://doi.org/10.3390/soc14110214</a>
</div>
<div id="ref-castillo_meritocracia_2019" class="csl-entry" role="listitem">
Castillo, J. C., Torres, A., Atria, J., &amp; Maldonado, L. (2019). Meritocracia y desigualdad econ<span>ó</span>mica: <span>Percepciones</span>, preferencias e implicancias. <em>Revista Internacional de Sociolog<span>í</span>a</em>, <em>77</em>(1), 117. <a href="https://doi.org/10.3989/ris.2019.77.1.17.114">https://doi.org/10.3989/ris.2019.77.1.17.114</a>
</div>
<div id="ref-chancel_world_2022" class="csl-entry" role="listitem">
Chancel, L., Piketty, T., Saez, E., &amp; Zucman, G. (2022). World inequality report 2022. https://bibliotecadigital.ccb.org.co/handle/11520/27510.
</div>
<div id="ref-corvalan_mercado_2017" class="csl-entry" role="listitem">
Corvalán, J., Carrasco, A., &amp; García-Huidobro;J. E. (2017). <em>Mercado escolar: <span>Libertad</span>, diversidad y desigualdad</em>. Ediciones UC.
</div>
<div id="ref-darnon_where_2018" class="csl-entry" role="listitem">
Darnon, C., Wiederkehr, V., Dompnier, B., &amp; Martinot, D. (2018). <span>“<span>Where</span> there is a will, there is a way”</span>: <span>Belief</span> in school meritocracy and the social-class achievement gap. <em>British Journal of Social Psychology</em>, <em>57</em>(1), 250–262. <a href="https://doi.org/10.1111/bjso.12214">https://doi.org/10.1111/bjso.12214</a>
</div>
<div id="ref-dubet_repensar_2011" class="csl-entry" role="listitem">
Dubet, F. (2011). <em><span>Repensar la justicia social</span></em> (Sexta Edici<span>ó</span>n). Siglo XXI.
</div>
<div id="ref-elenbaas_unfairness_2019a" class="csl-entry" role="listitem">
Elenbaas, L. (2019). Against unfairness: <span>Young</span> children’s judgments about merit, equity, and equality. <em>Journal of Experimental Child Psychology</em>, <em>186</em>, 73–82. <a href="https://doi.org/10.1016/j.jecp.2019.05.009">https://doi.org/10.1016/j.jecp.2019.05.009</a>
</div>
<div id="ref-erivwo_meritocracy_2021" class="csl-entry" role="listitem">
Erivwo, A., Varghese, E., Mathai, A., &amp; Afrin, T. (2021). Meritocracy in the <span>Educational System</span>. <a href="https://doi.org/10.5281/ZENODO.4740695">https://doi.org/10.5281/ZENODO.4740695</a>
</div>
<div id="ref-garcia-sierra_dark_2023" class="csl-entry" role="listitem">
García-Sierra, A. (2023). The dark side of meritocratic beliefs: <span>Is</span> believing in meritocracy detrimental to individuals from low socioeconomic backgrounds? <em>Social Justice Research</em>, <em>36</em>(4), 385–409. <a href="https://doi.org/10.1007/s11211-023-00413-x">https://doi.org/10.1007/s11211-023-00413-x</a>
</div>
<div id="ref-goldthorpe_myth_2003a" class="csl-entry" role="listitem">
Goldthorpe, J. (2003). The myth of education-based meritocracy. <em>New Economy</em>, <em>10</em>(4), 234–239. <a href="https://doi.org/10.1046/j.1468-0041.2003.00324.x">https://doi.org/10.1046/j.1468-0041.2003.00324.x</a>
</div>
<div id="ref-goudeau_hidden_2017a" class="csl-entry" role="listitem">
Goudeau, S., &amp; Croizet, J.-C. (2017). Hidden <span>Advantages</span> and <span>Disadvantages</span> of <span>Social Class</span>: <span>How Classroom Settings Reproduce Social Inequality</span> by <span>Staging Unfair Comparison</span>. <em>Psychological Science</em>, <em>28</em>(2), 162–170. <a href="https://doi.org/10.1177/0956797616676600">https://doi.org/10.1177/0956797616676600</a>
</div>
<div id="ref-jost_psychology_2003" class="csl-entry" role="listitem">
Jost, J., &amp; Hunyady, O. (2003). The psychology of system justification and the palliative function of ideology. <em>European Review of Social Psychology</em>, <em>13</em>(1), 111–153. <a href="https://doi.org/10.1080/10463280240000046">https://doi.org/10.1080/10463280240000046</a>
</div>
<div id="ref-lopez-roldan_comparative_2021" class="csl-entry" role="listitem">
López-Roldán, P., &amp; Fachelli, S. (Eds.). (2021). <em>Towards a <span>Comparative Analysis</span> of <span>Social Inequalities</span> between <span>Europe</span> and <span>Latin America</span></em>. Cham: Springer International Publishing. <a href="https://doi.org/10.1007/978-3-030-48442-2">https://doi.org/10.1007/978-3-030-48442-2</a>
</div>
<div id="ref-madariaga_three_2020" class="csl-entry" role="listitem">
Madariaga, A. (2020). The three pillars of neoliberalism: <span>Chile</span>’s economic policy trajectory in comparative perspective. <em>Contemporary Politics</em>, <em>26</em>(3), 308–329. <a href="https://doi.org/10.1080/13569775.2020.1735021">https://doi.org/10.1080/13569775.2020.1735021</a>
</div>
<div id="ref-markovits_meritocracy_2019" class="csl-entry" role="listitem">
Markovits, D. (2019). <em>The <span>Meritocracy</span> trap: How <span>America</span>’s foundational myth feeds inequality, dismantles the middle class, and devours the elite</em>. New York: Penguin Press.
</div>
<div id="ref-mijs_unfulfillable_2016" class="csl-entry" role="listitem">
Mijs, J. (2016). The <span>Unfulfillable Promise</span> of <span>Meritocracy</span>: <span>Three Lessons</span> and <span>Their Implications</span> for <span>Justice</span> in <span>Education</span>. <em>Social Justice Research</em>, <em>29</em>(1), 14–34. <a href="https://doi.org/10.1007/s11211-014-0228-0">https://doi.org/10.1007/s11211-014-0228-0</a>
</div>
<div id="ref-mijs_paradox_2019" class="csl-entry" role="listitem">
Mijs, J. (2019). The paradox of inequality: Income inequality and belief in meritocracy go hand in hand. <em>Socio-Economic Review</em>, <em>19</em>(1), 7–35. <a href="https://doi.org/10.1093/ser/mwy051">https://doi.org/10.1093/ser/mwy051</a>
</div>
<div id="ref-newman_economic_2023" class="csl-entry" role="listitem">
Newman, B. J. (2023). Economic <span>Inequality</span>, the <span>Working Poor</span>, and <span>Belief</span> in the <span>American Dream</span>. <em>Public Opinion Quarterly</em>, <em>86</em>(4), 944–954. <a href="https://doi.org/10.1093/poq/nfac043">https://doi.org/10.1093/poq/nfac043</a>
</div>
<div id="ref-trump_when_2020" class="csl-entry" role="listitem">
Trump, K.-S. (2020). When and why is economic inequality seen as fair. <em>Current Opinion in Behavioral Sciences</em>, <em>34</em>, 46–51. <a href="https://doi.org/10.1016/j.cobeha.2019.12.001">https://doi.org/10.1016/j.cobeha.2019.12.001</a>
</div>
<div id="ref-wiederkehr_belief_2015" class="csl-entry" role="listitem">
Wiederkehr, V., Bonnot, V., Krauth-Gruber, S., &amp; Darnon, C. (2015). Belief in school meritocracy as a system-justifying tool for low status students. <em>Frontiers in Psychology</em>, <em>6</em>.
</div>
<div id="ref-witteveen_reconsidering_2020" class="csl-entry" role="listitem">
Witteveen, D., &amp; Attewell, P. (2020). Reconsidering the <span>“meritocratic power of a college degree.”</span> <em>Research in Social Stratification and Mobility</em>, <em>66</em>, 100479. <a href="https://doi.org/10.1016/j.rssm.2020.100479">https://doi.org/10.1016/j.rssm.2020.100479</a>
</div>
<div id="ref-young_rise_1958" class="csl-entry" role="listitem">
Young, M. (1958). <em>The rise of the meritocracy</em>. New Brunswick, N.J., U.S.A: Transaction Publishers.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>